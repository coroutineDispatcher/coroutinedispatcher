<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>Why LiveData is the best solution (yet) for UI - Coroutinedispatchers&#39; blog</title><meta name="Description" content="About LoveIt Theme"><meta property="og:title" content="Why LiveData is the best solution (yet) for UI" />
<meta property="og:description" content="Why LiveData is the best solution (yet) for UI
As far as I am concerned, there are many developers who don&rsquo;t like LiveData. However, for the UI part, there is no better API to achieve MVVM (or even MVI,or stateful MVVM). Furthermore, makes the UI control very easy.
There might have been some small misconceptions regarding the usage of it, but, if you use LiveData for the purpose it was created, I think that&rsquo;s far better than any other API (for the moment)." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://coroutinedispatcher.github.io/coroutinedispatcher/posts/why-livedata-is-best-solution-yet-for-ui/" />
<meta property="article:published_time" content="2020-05-23T18:41:00+02:00" />
<meta property="article:modified_time" content="2020-05-23T18:41:00+02:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Why LiveData is the best solution (yet) for UI"/>
<meta name="twitter:description" content="Why LiveData is the best solution (yet) for UI
As far as I am concerned, there are many developers who don&rsquo;t like LiveData. However, for the UI part, there is no better API to achieve MVVM (or even MVI,or stateful MVVM). Furthermore, makes the UI control very easy.
There might have been some small misconceptions regarding the usage of it, but, if you use LiveData for the purpose it was created, I think that&rsquo;s far better than any other API (for the moment)."/>
<meta name="application-name" content="LoveIt">
<meta name="apple-mobile-web-app-title" content="LoveIt"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://coroutinedispatcher.github.io/coroutinedispatcher/posts/why-livedata-is-best-solution-yet-for-ui/" /><link rel="prev" href="https://coroutinedispatcher.github.io/coroutinedispatcher/posts/coroutines-and-callbacks/" /><link rel="next" href="https://coroutinedispatcher.github.io/coroutinedispatcher/posts/realm-7-frozen-throne/" /><link rel="stylesheet" href="/coroutinedispatcher/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/coroutinedispatcher/css/style.min.css"><link rel="stylesheet" href="/coroutinedispatcher/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/coroutinedispatcher/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Why LiveData is the best solution (yet) for UI",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/coroutinedispatcher.github.io\/coroutinedispatcher\/posts\/why-livedata-is-best-solution-yet-for-ui\/"
        },"genre": "posts","keywords": "Android Architecture Components, Kotlin Flows, Android Lifecycle, LiveData, Kotlin Coroutines, Android, Kotlin programming, Android Development","wordcount":  666 ,
        "url": "https:\/\/coroutinedispatcher.github.io\/coroutinedispatcher\/posts\/why-livedata-is-best-solution-yet-for-ui\/","datePublished": "2020-05-23T18:41:00+02:00","dateModified": "2020-05-23T18:41:00+02:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "Stavro Xhardha"},"author": {
                "@type": "Person",
                "name": "Stavro Xhardha"
            },"description": ""
    }
    </script></head>
    <body header-desktop="" header-mobile=""><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : '' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/coroutinedispatcher/" title="Coroutinedispatchers&#39; blog">Coroutinedispatchers&#39; blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/coroutinedispatcher/coroutinedispatcher/"> Home </a><a class="menu-item" href="/coroutinedispatcher/coroutinedispatcher/posts/"> Posts </a><a class="menu-item" href="/coroutinedispatcher/coroutinedispatcher/about/"> About </a><a class="menu-item" href="https://speakerdeck.com/stavro96" rel="noopener noreffer" target="_blank"> Presentation Slides </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/coroutinedispatcher/" title="Coroutinedispatchers&#39; blog">Coroutinedispatchers&#39; blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/coroutinedispatcher/coroutinedispatcher/" title="">Home</a><a class="menu-item" href="/coroutinedispatcher/coroutinedispatcher/posts/" title="">Posts</a><a class="menu-item" href="/coroutinedispatcher/coroutinedispatcher/about/" title="">About</a><a class="menu-item" href="https://speakerdeck.com/stavro96" title="" rel="noopener noreffer" target="_blank">Presentation Slides</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">Why LiveData is the best solution (yet) for UI</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/about/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Stavro Xhardha</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2020-05-23">2020-05-23</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;666 words&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;4 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents"></nav></div>
            </div><div class="content" id="content"><p><a href="https://1.bp.blogspot.com/-7h3jvvtkTho/XslQLFl4LSI/AAAAAAAATmc/3J3OIxB0A2snaP26TE9VjmqnHeej1pvOgCK4BGAsYHg/bence-balla-schottner-qdRK3GDo8Ns-unsplash.jpg" target="_blank" rel="noopener noreffer"><img
        class="lazyload"
        src="/coroutinedispatcher/svg/loading.min.svg"
        data-src="https://1.bp.blogspot.com/-7h3jvvtkTho/XslQLFl4LSI/AAAAAAAATmc/3J3OIxB0A2snaP26TE9VjmqnHeej1pvOgCK4BGAsYHg/d/bence-balla-schottner-qdRK3GDo8Ns-unsplash.jpg"
        data-srcset="https://1.bp.blogspot.com/-7h3jvvtkTho/XslQLFl4LSI/AAAAAAAATmc/3J3OIxB0A2snaP26TE9VjmqnHeej1pvOgCK4BGAsYHg/d/bence-balla-schottner-qdRK3GDo8Ns-unsplash.jpg, https://1.bp.blogspot.com/-7h3jvvtkTho/XslQLFl4LSI/AAAAAAAATmc/3J3OIxB0A2snaP26TE9VjmqnHeej1pvOgCK4BGAsYHg/d/bence-balla-schottner-qdRK3GDo8Ns-unsplash.jpg 1.5x, https://1.bp.blogspot.com/-7h3jvvtkTho/XslQLFl4LSI/AAAAAAAATmc/3J3OIxB0A2snaP26TE9VjmqnHeej1pvOgCK4BGAsYHg/d/bence-balla-schottner-qdRK3GDo8Ns-unsplash.jpg 2x"
        data-sizes="auto"
        alt="https://1.bp.blogspot.com/-7h3jvvtkTho/XslQLFl4LSI/AAAAAAAATmc/3J3OIxB0A2snaP26TE9VjmqnHeej1pvOgCK4BGAsYHg/d/bence-balla-schottner-qdRK3GDo8Ns-unsplash.jpg"
        title="https://1.bp.blogspot.com/-7h3jvvtkTho/XslQLFl4LSI/AAAAAAAATmc/3J3OIxB0A2snaP26TE9VjmqnHeej1pvOgCK4BGAsYHg/d/bence-balla-schottner-qdRK3GDo8Ns-unsplash.jpg" /></a></p>
<p>Why LiveData is the best solution (yet) for UI</p>
<p>As far as I am concerned, there are many developers who don&rsquo;t like LiveData. However, for the UI part, there is no better API to achieve MVVM (or even MVI,or stateful MVVM). Furthermore, makes the UI control very easy.</p>
<p>There might have been some small misconceptions regarding the usage of it, but, if you use LiveData for the purpose it was created, I think that&rsquo;s far better than any other API (for the moment).</p>
<p>Some general misconceptions</p>
<p>- Should I use LiveData over Flow for network calls?</p>
<p>- Should I use LiveData over RxJava for network calls?</p>
<p>- Should I use LiveData for the Database? (somehow accepted, I disagree)</p>
<p>- Should I replace everything with LiveData?</p>
<p>The right questions to ask:</p>
<p>- Can I use Flow/RxJava instead of LiveData for the UI?</p>
<p>And honestly the answer would be a big YES, and it&rsquo;s a nice pattern to use also. But, my strongest point here is that they both were not created for the purpose that they are being used for in this case.</p>
<p>The LiveData API</p>
<p>First of all, let&rsquo;s introduce a myth: LiveData is complicated. Perhaps, the &ldquo;back-end&rdquo; of it might be, but that&rsquo;s one of the purposes when someone provides a dependency, and it&rsquo;s not only to reduce boilerplate, but to make the development simpler, even though building it might be complex. If we take Retrofit as an example, it&rsquo;s just a less boilerplate Okhttp thing (or asI like to call it: abstraction over OkHttp). But if we take Android ViewModels as an</p>
<p>example, there is nothing simple behind it. But we just extend a ViewModel&hellip;.</p>
<p>And the same case with LiveData. Remember, nothing is too simple when it comes to Android and the Observable pattern in general. If you are interested to check the LiveData, <a href="https://cs.android.com/androidx/platform/frameworks/support/&#43;/androidx-master-dev:lifecycle/lifecycle-livedata-core/src/main/java/androidx/lifecycle/LiveData.java;l=59?q=LiveData&amp;sq=&amp;ss=androidx%2Fplatform%2Fframeworks%2Fsupport" target="_blank" rel="noopener noreffer">here</a> is the code of it.</p>
<p>So, LiveData is simple.</p>
<p>Let&rsquo;s check what I mean with that:</p>
<p>private val _userFirstName = MutableLiveData&lt;String&gt;()</p>
<p>val userFirstName: LiveData&lt;String&gt; = _userFirstName</p>
<p>And in order to observe it (from Fragment/Activity):</p>
<p>viewModel.userFirstName.observe(viewLifecycleOwner, Observer{ result -&gt;</p>
<p>userNameTextView.text = result</p>
<p>})</p>
<p>That&rsquo;s it. This is basic observable pattern.</p>
<p>You have forgotten to unsubscribe at some point.</p>
<p>Actually no. And this is really a strong second argument: LiveData is lifecycle aware.</p>
<p>You don&rsquo;t need to (un)subscribe in order to prevent possible issues.</p>
<p>Note: For specific cases, you can use removeObserver() also.</p>
<p>Can&rsquo;t say it&rsquo;s thread safe, but it actually is.</p>
<p>You are free not to switch to the main thread and instead just use the postValue() method:</p>
<p>withContext(Dispatchers.IO){</p>
<p>_userName.value = repository.getUserName() //WON&rsquo;T WORK</p>
<p>}</p>
<p>withContext(Dispatchers.IO){</p>
<p>_userName.postValue(repository.getUserName())</p>
<p>}</p>
<p>Less verbose</p>
<p>Even though RxJava and StateFlow are already pretty nice option to replace LiveData with, they have more boilerplate than LiveData in whatever the case.</p>
<p>Let&rsquo;s consider RxJava for example:</p>
<p>private val compositeDisposable = CompositeDisposable()</p>
<p>  &hellip;</p>
<p>fun observeViewModelChanges(){</p>
<p>compositeDisposable.add(viewModel.usernameOservable())</p>
<p>}</p>
<p>  &hellip;</p>
<p>override fun onDestroy(){</p>
<p>compositeDisposable.dispose()</p>
<p>super.onDestory()</p>
<p>}</p>
<p>Same case with StateFlow:</p>
<p>fun observeViewModelChanges(){</p>
<p>myViewModel.myStateFlow()</p>
<p>    .map{userName -&gt; handleUserName() }</p>
<p>.launchIn(lifeCycleScope)</p>
<p>}</p>
<p>Or worse, in case we don&rsquo;t are not using lifecyclescope:</p>
<p>private val job = Job()</p>
<p>private val coroutineScope = CoroutineScope(Dispatchers.Main + job)</p>
<p>  &hellip;</p>
<p>fun obserViewModelChanges(){</p>
<p>myViewModel.obserValuesStateFlow()</p>
<p>    .map{userName -&gt; handleUserName() }</p>
<p>.launchIn(coroutineScope)</p>
<p>}</p>
<p>  &hellip;</p>
<p>override fun onDestory(){</p>
<p>coroutineScope.cancel()</p>
<p>super.onDestroy()</p>
<p>}</p>
<p>While in LiveData there is at least one line less:</p>
<p>  viewModel.userFirstName.observe(viewLifecycleOwner, Observer{ result -&gt;</p>
<p>   handleResult(result)</p>
<p>  })</p>
<p>Another small misconception:</p>
<p>If I&rsquo;m right, why is Google making <a href="https://github.com/googlecodelabs/kotlin-coroutines" target="_blank" rel="noopener noreffer">tutorials</a> on Flow by removing LiveData? I&rsquo;m pretty sure that&rsquo;s only for the sake of the tutorial and learning something new. However, there might be some places where LiveData is worth being replaced with Flow API, like Room database calls, for instance.</p>
<p>onDestroy</p>
<p>In my opinion, LiveData is not going anywhere for some time. Perhaps, we could see some new LiveData which implements StateFlow on the background, in the future, (making a new lifecycle aware StateFlow API) from the Android team, but that could be definitely after the StateFlow exits the Experimental status. Use LiveData and you will have a simpler everyday development.</p>
<p>Stavro Xhardha</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2020-05-23</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/coroutinedispatcher/tags/android-architecture-components./">Android Architecture Components.</a>,&nbsp;<a href="/coroutinedispatcher/tags/kotlin-flows/">Kotlin Flows</a>,&nbsp;<a href="/coroutinedispatcher/tags/android-lifecycle/">Android Lifecycle</a>,&nbsp;<a href="/coroutinedispatcher/tags/livedata/">LiveData</a>,&nbsp;<a href="/coroutinedispatcher/tags/kotlin-coroutines/">Kotlin Coroutines</a>,&nbsp;<a href="/coroutinedispatcher/tags/android/">Android</a>,&nbsp;<a href="/coroutinedispatcher/tags/kotlin-programming/">Kotlin programming</a>,&nbsp;<a href="/coroutinedispatcher/tags/android-development/">Android Development</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/coroutinedispatcher/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/coroutinedispatcher/posts/coroutines-and-callbacks/" class="prev" rel="prev" title="Coroutines and callbacks"><i class="fas fa-angle-left fa-fw"></i>Coroutines and callbacks</a>
            <a href="/coroutinedispatcher/posts/realm-7-frozen-throne/" class="next" rel="next" title="Realm 7, the frozen throne">Realm 7, the frozen throne<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.73.0">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2020</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/about/" target="_blank">Stavro Xhardha</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><script type="text/javascript" src="/coroutinedispatcher/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/coroutinedispatcher/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/coroutinedispatcher/lib/algoliasearch/algoliasearch-lite.umd.min.js"></script><script type="text/javascript" src="/coroutinedispatcher/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/coroutinedispatcher/lib/clipboard/clipboard.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":10},"comment":{},"search":{"algoliaAppID":"PASDMWALPK","algoliaIndex":"index.en","algoliaSearchKey":"b42948e51daaa93df92381c8e2ac0f93","highlightTag":"em","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30,"type":"algolia"}};</script><script type="text/javascript" src="/coroutinedispatcher/js/theme.min.js"></script></body>
</html>
