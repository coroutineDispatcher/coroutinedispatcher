<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>Why the ViewModel is now a must - Coroutinedispatchers&#39; blog</title><meta name="Description" content="About LoveIt Theme"><meta property="og:title" content="Why the ViewModel is now a must" />
<meta property="og:description" content="Inspired by Lyla Fujiwars latest post, ViewModels with Saved State, Jetpack Navigation, Data Binding and Coroutines, I decided to list some of the reasons why the ViewModel is strongly suggested to be used on the Android app.
1. Views are independent
The ViewModel does fully respect the Single Responsibility Principle, leaving the Activity/Fragmentdo its thing. When the ViewModel is included, views are passive and just wait for changes without actually doing anything." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://coroutinedispatcher.github.io/posts/why-viewmodel-is-now-must/" />
<meta property="article:published_time" content="2019-06-25T12:53:00+02:00" />
<meta property="article:modified_time" content="2019-06-25T12:53:00+02:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Why the ViewModel is now a must"/>
<meta name="twitter:description" content="Inspired by Lyla Fujiwars latest post, ViewModels with Saved State, Jetpack Navigation, Data Binding and Coroutines, I decided to list some of the reasons why the ViewModel is strongly suggested to be used on the Android app.
1. Views are independent
The ViewModel does fully respect the Single Responsibility Principle, leaving the Activity/Fragmentdo its thing. When the ViewModel is included, views are passive and just wait for changes without actually doing anything."/>
<meta name="application-name" content="LoveIt">
<meta name="apple-mobile-web-app-title" content="LoveIt"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://coroutinedispatcher.github.io/posts/why-viewmodel-is-now-must/" /><link rel="prev" href="https://coroutinedispatcher.github.io/posts/what-i-learned-from-unit-testing/" /><link rel="next" href="https://coroutinedispatcher.github.io/posts/a-fusion-between-workmanager-and/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Why the ViewModel is now a must",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/coroutinedispatcher.github.io\/posts\/why-viewmodel-is-now-must\/"
        },"genre": "posts","keywords": "Coroutines, Android Architecture Components, ViewModel, Android Development","wordcount":  527 ,
        "url": "https:\/\/coroutinedispatcher.github.io\/posts\/why-viewmodel-is-now-must\/","datePublished": "2019-06-25T12:53:00+02:00","dateModified": "2019-06-25T12:53:00+02:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "Stavro Xhardha"},"author": {
                "@type": "Person",
                "name": "Stavro Xhardha"
            },"description": ""
    }
    </script></head>
    <body header-desktop="" header-mobile=""><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : '' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Coroutinedispatchers&#39; blog">Coroutinedispatchers&#39; blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/"> Home </a><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/about/"> About </a><a class="menu-item" href="https://speakerdeck.com/stavro96" rel="noopener noreffer" target="_blank"> Presentation Slides </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Coroutinedispatchers&#39; blog">Coroutinedispatchers&#39; blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/" title="">Home</a><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/about/" title="">About</a><a class="menu-item" href="https://speakerdeck.com/stavro96" title="" rel="noopener noreffer" target="_blank">Presentation Slides</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">Why the ViewModel is now a must</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/about/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Stavro Xhardha</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2019-06-25">2019-06-25</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;527 words&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;3 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents"></nav></div>
            </div><div class="content" id="content"><p><a href="https://1.bp.blogspot.com/-_ig9ZjauT1Q/XRH9RpHZiCI/AAAAAAAAOI0/56-SUoVpyNowwud40mJGvAaAsdDm9EbMwCLcBGAs/s1600/mel-elias-0RanOcSEpAo-unsplash.jpg" target="_blank" rel="noopener noreffer"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://1.bp.blogspot.com/-_ig9ZjauT1Q/XRH9RpHZiCI/AAAAAAAAOI0/56-SUoVpyNowwud40mJGvAaAsdDm9EbMwCLcBGAs/s1600/mel-elias-0RanOcSEpAo-unsplash.jpg"
        data-srcset="https://1.bp.blogspot.com/-_ig9ZjauT1Q/XRH9RpHZiCI/AAAAAAAAOI0/56-SUoVpyNowwud40mJGvAaAsdDm9EbMwCLcBGAs/s1600/mel-elias-0RanOcSEpAo-unsplash.jpg, https://1.bp.blogspot.com/-_ig9ZjauT1Q/XRH9RpHZiCI/AAAAAAAAOI0/56-SUoVpyNowwud40mJGvAaAsdDm9EbMwCLcBGAs/s1600/mel-elias-0RanOcSEpAo-unsplash.jpg 1.5x, https://1.bp.blogspot.com/-_ig9ZjauT1Q/XRH9RpHZiCI/AAAAAAAAOI0/56-SUoVpyNowwud40mJGvAaAsdDm9EbMwCLcBGAs/s1600/mel-elias-0RanOcSEpAo-unsplash.jpg 2x"
        data-sizes="auto"
        alt="https://1.bp.blogspot.com/-_ig9ZjauT1Q/XRH9RpHZiCI/AAAAAAAAOI0/56-SUoVpyNowwud40mJGvAaAsdDm9EbMwCLcBGAs/s1600/mel-elias-0RanOcSEpAo-unsplash.jpg"
        title="https://1.bp.blogspot.com/-_ig9ZjauT1Q/XRH9RpHZiCI/AAAAAAAAOI0/56-SUoVpyNowwud40mJGvAaAsdDm9EbMwCLcBGAs/s1600/mel-elias-0RanOcSEpAo-unsplash.jpg" /></a></p>
<p>Inspired by Lyla Fujiwars latest post, <a href="https://medium.com/androiddevelopers/viewmodels-with-saved-state-jetpack-navigation-data-binding-and-coroutines-df476b78144e" target="_blank" rel="noopener noreffer">ViewModels with Saved State, Jetpack Navigation, Data Binding and Coroutines</a>, I decided to list some of the reasons why the ViewModel is strongly suggested to be used on the Android app.</p>
<p><strong>1. Views are independent</strong><br>
The ViewModel does fully respect the Single Responsibility Principle, leaving the Activity/Fragmentdo its thing. When the ViewModel is included,  views are passive and just wait for changes without actually doing anything. This is done through LiveData or RxJava, which provide observable fields: </p>
<p>The MutableLiveData is the variable we are prepared that it might take changes of the value asigned during the flow. And giving its value to the live data means that whatever happens that variable value LiveData is going to observe it. <br>
After that, the Fragment/Activity just waits for that variable: </p>
<p>If you notice, the view does nothing except handles the child views.</p>
<p><strong>2. Presenter destroyed</strong><br>
I don&rsquo;t want to be rude with people using the MVP architecture, but I think the ViewModelremoves lots of boilerplate code as well as the view reference from the presenter. MVP done wrong could just lead us to complex architecture apps. However, the Android team strongly suggests using the presenter behind the ViewModel if you have lots of business logic to deal with and infinite number of if and else blocks. </p>
<p><strong>3. onSavedInstanceState is not a pain anymore</strong><br>
If you check the article on the introduction, the latest version of Android Architecture components has brought a nice support over the onSavedInstanceState. You will now deal with it on the ViewModel, and only instantiating it on the Activity/Fragment</p>
<p><em>Note, below gists not original, brought from the article above</em></p>
<p>And now a simple case for restoring some userId:</p>
<p>That&rsquo;s simply because the ViewModeldeserved more to deal with the onSavedInstanceState than the views, plus it has a different lifecycle which makes it survive the configuration change.</p>
<p><strong>4. Can be used to share data between fragments</strong><br>
@import url(&lsquo;<a href="https://cdn.rawgit.com/lonekorean/gist-syntax-themes/848d6580/stylesheets/monokai.css');">https://cdn.rawgit.com/lonekorean/gist-syntax-themes/848d6580/stylesheets/monokai.css');</a> @import url(&lsquo;<a href="https://fonts.googleapis.com/css?family=Open+Sans');">https://fonts.googleapis.com/css?family=Open+Sans');</a> body { margin: 20px; font: 16px &lsquo;Open Sans&rsquo;, sans-serif; } And I love it lot. ViewModels can be easy integrated to share data between fragments, removing once and for all the broken telephone way of EventBuses, perhaps static variables or some unnecessary SharedPreferences calls.</p>
<p><strong>5. Easy integration with Coroutines</strong></p>
<p>And my favorite part. The Android team has introduced us with an extension function for the ViewModelcalled viewModelScope. What is does is basically gives a CoroutineContext that handles lifecycle without need to override the onCleared method to cancel the job. That way, you don&rsquo;t have to be scared of memory leaks and perform coroutine actions easily. For more information, please head over to my other post about Usage of the <a href="https://proandroiddev.com/usage-of-the-viewmodelscope-f28703467b31" target="_blank" rel="noopener noreffer">ViewModelScope</a> .</p>
<p><strong>Conclusion</strong><br>
In my own opinion, the ViewModel has been the missing peace which corrected lots of admitted mistakes by the Android team. Android apps without a ViewModel don&rsquo;t suck, they are all awesome and each developer needs to be congratulated for building apps, but the ViewModel makes life easier. There are lots of other reasons, and really important ones. For example the Databinding, but their logic can be achieved even without ViewModel also, that&rsquo;s why I haven&rsquo;t included it in the post.</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2019-06-25</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/coroutines/">Coroutines</a>,&nbsp;<a href="/tags/android-architecture-components./">Android Architecture Components.</a>,&nbsp;<a href="/tags/viewmodel/">ViewModel</a>,&nbsp;<a href="/tags/android-development/">Android Development</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/what-i-learned-from-unit-testing/" class="prev" rel="prev" title="What I learned from unit testing"><i class="fas fa-angle-left fa-fw"></i>What I learned from unit testing</a>
            <a href="/posts/a-fusion-between-workmanager-and/" class="next" rel="next" title="A fusion between WorkManager and AlarmManager">A fusion between WorkManager and AlarmManager<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.73.0">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2020</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/about/" target="_blank">Stavro Xhardha</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/algoliasearch/algoliasearch-lite.umd.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":10},"comment":{},"search":{"algoliaAppID":"PASDMWALPK","algoliaIndex":"index.en","algoliaSearchKey":"b42948e51daaa93df92381c8e2ac0f93","highlightTag":"em","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30,"type":"algolia"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
